{% set name = "kmbio" %}
{% set version = "2.0.4" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  path: ../

build:
  script: $PYTHON setup.py install --single-version-externally-managed --record=record.txt
  number: 0

requirements:
  host:
    - setuptools
    - wheel
    - cython
    - python
    - numpy {{ numpy }}.*
    - mmtf-python
  build:
    - {{ compiler('c') }}
  run:
    - python
    - numpy {{ numpy }}.*
    - mmtf-python
    - pandas
    - biopython
    - retrying
    - pyyaml
    # Binaries
    # - bwa
    - clustalo
    - clustalw
    - emboss
    - mafft
    - muscle
    # - paml
    # - phyml
    # - probcons
    # - samtools
    # - wise2

test:
  imports:
    - Bio
    - Bio.KDTree
    - Bio.KDTree._CKDTree
    - kmbio.PDB
    - kmbio.PDB.core
    - kmbio.PDB.io
    - kmbio.PDB.parsers
    - kmbio.PDB.parsers._shlex
    - kmbio.PDB.parsers._mmcif_to_dict
    - kmbio.PDB.tools
    - kmbio.PDB.tools.QCPSuperimposer
    - Bio.SVDSuperimposer
  requires:
    - flake8
    - pytest
    - pytest-cov

outputs:
  - name: {{ name }}
    type: conda
  - type: wheel
    requirements:
      build:
        - numpy {{ numpy }}.*
        - cython
